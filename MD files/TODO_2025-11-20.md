# TODO List - November 20, 2025

> **üìñ First Time Starting Today?** Read `START_HERE_2025-11-20.md` first for quick context!

---

## üî¥ HIGH PRIORITY - Morning Checks

### 1. Verify Midnight Automated Run ‚è∞
**Task:** Check that last night's scheduled scanner ran successfully

**Steps:**
```bash
# Check log file exists
dir C:\StockApp\agents\logs\scanner_20251120_*.log

# Read the log to verify completion
# Look for: "‚úÖ SCAN COMPLETE" and "üéØ Fusion Agent completed successfully!"

# Check file timestamps
powershell -Command "(Get-Item 'C:\StockApp\agents\repository\scanner_output.json').LastWriteTime"
powershell -Command "(Get-Item 'C:\StockApp\agents\repository\fusion_output.json').LastWriteTime"
```

**Expected:** Log file from 00:00 run, updated JSON files with timestamp around midnight

**If Failed:**
- Check Task Scheduler status: `taskschd.msc`
- Review error messages in log file
- Verify task permissions and paths

---

## üü° MEDIUM PRIORITY - Agent Pipeline Improvements

### 2. Install Missing lxml Package üì¶
**Why:** Enable full S&P 500 list (currently using fallback of 55 stocks)

**Command:**
```bash
C:\StockApp\venv\Scripts\pip.exe install lxml
```

**Benefit:** Scan all 500+ S&P stocks instead of just 55 major stocks

**Test:** Run scanner manually and verify no "Failed to fetch S&P 500 list" warning

---

### 3. Run Full Agent Pipeline for All 105 Candidates ü§ñ
**Problem:** Only 12/105 scanned symbols have fusion data

**Current Gap:**
- Scanner found 105 candidates
- Indicators/Volume agents only analyzed 12 (the old symbols)
- 93 symbols have no agent data yet

**Solution Options:**

#### Option A: Manual Run (Quick Test)
```bash
cd C:\StockApp\agents
venv\Scripts\python.exe indicators_agent.py
venv\Scripts\python.exe volume_agent.py
venv\Scripts\python.exe tick_agent.py
venv\Scripts\python.exe fusion_agent.py
```

#### Option B: Automate Full Pipeline (Recommended)
**Task:** Modify `run_scanner_scheduled.bat` to run full agent chain

**Current Batch File:**
```batch
python comprehensive_scanner.py >> %LOG_FILE% 2>&1
python fusion_agent.py >> %LOG_FILE% 2>&1
```

**Enhanced Version:**
```batch
python comprehensive_scanner.py >> %LOG_FILE% 2>&1
python indicators_agent.py >> %LOG_FILE% 2>&1
python volume_agent.py >> %LOG_FILE% 2>&1
python tick_agent.py >> %LOG_FILE% 2>&1
python fusion_agent.py >> %LOG_FILE% 2>&1
```

**Expected Result:** All 105 candidates analyzed and appearing in heat maps

---

### 4. Fix Crypto Historical Data Issue üîß
**Problem:** Many cryptos showing "No signals available" in fusion

**Symbols Affected:**
- ZEC, STRK, BNB, XMR, FIL, HBAR, SHIB, TON, ARB, ATOM, XLM, etc.
- Yahoo Finance error: "possibly delisted; no price data found"

**Root Cause:** Yahoo Finance doesn't have these crypto symbols

**Solutions:**

#### Option 1: Add CoinGecko Historical Data to Indicators Agent
Modify `indicators_agent.py` to use CoinGecko API for crypto historical data
- Already have `pycoingecko` installed ‚úÖ
- Can fetch OHLCV data for technical analysis

#### Option 2: Use Alternative Data Source
- Binance API (free)
- Kraken API (free)
- CryptoCompare API (free tier)

**Recommendation:** Implement CoinGecko historical data integration in indicators agent

---

## üü¢ LOW PRIORITY - Optimization & Enhancement

### 5. Get Polygon API Key üîë
**Current Status:** Using Yahoo Finance fallback (slower)

**Steps:**
1. Sign up at https://polygon.io/ (free tier: 5 API calls/min)
2. Copy API key
3. Add to `C:\StockApp\backend\.env`:
   ```
   POLYGON_API_KEY=your_actual_key_here
   ```
4. Restart scanner

**Benefit:**
- Faster stock data fetching
- More reliable than Yahoo Finance
- Professional-grade data quality

---

### 6. Optimize Scanner Performance ‚ö°
**Current Duration:** 163 seconds (~2.7 minutes) for 155 symbols

**Potential Improvements:**
1. **Parallel Processing:** Use `concurrent.futures` to scan multiple symbols simultaneously
2. **Caching:** Cache S&P 500 list (avoid refetching daily)
3. **Rate Limit Optimization:** Batch requests more efficiently

**Expected Impact:** Reduce scan time to under 1 minute

---

### 7. Add Real-Time Tick Data Collection üìä
**Current Status:** Tick agent has no data for any symbols

**Why:** Tick agent tracks real-time price movements and order flow

**Implementation:**
1. Review existing tick_agent.py
2. Determine if it needs WebSocket integration
3. Run tick agent in background continuously (not just nightly)
4. Consider running as Windows Service for 24/7 operation

---

### 8. Implement Supreme Leader ‚Üí Tracker ‚Üí Evaluator Pipeline üëë
**Current Status:** Pipeline stops at Fusion Agent

**Complete Flow:**
```
Scanner ‚Üí Indicators/Volume/Tick ‚Üí Fusion ‚Üí Supreme Leader ‚Üí Tracker ‚Üí Evaluator ‚Üí Archivist ‚Üí Criteria Auditor
```

**Next Steps:**
1. Review what Supreme Leader does (position governance)
2. Test supreme_leader.py manually
3. Add to automated pipeline if needed
4. Document when each agent should run

---

## üìù DOCUMENTATION TASKS

### 9. Update Requirements.txt ‚úçÔ∏è
**Task:** Ensure all dependencies are documented

**Add:**
```
pycoingecko
polygon-api-client
ta
schedule
lxml
```

**Command:**
```bash
pip freeze > requirements_frozen.txt
# Review and merge into requirements.txt
```

---

### 10. Create Troubleshooting Guide üìö
**Content to Include:**
- Common errors and solutions
- How to check if scanner ran
- How to manually trigger agents
- How to verify heat map data
- Task Scheduler debugging

**File:** `C:\StockApp\TROUBLESHOOTING.md`

---

## üß™ TESTING & VALIDATION

### 11. Test Heat Map Categories üó∫Ô∏è
**Task:** Verify heat map categorization logic

**Check:**
- Intraday tab: Should show high-confidence signals (‚â•70% confidence, ‚â•65 score)
- Daily tab: Medium confidence (‚â•55% confidence, ‚â•55 score)
- Monthly tab: Lower confidence (‚â•40% confidence, ‚â•45 score)

**Current Data:**
- XOM (STRONG_BUY, 87.3 score, 0.95 conf) ‚Üí Should appear in all tabs ‚úÖ
- AMD (HOLD, 40.0 score, 0.70 conf) ‚Üí Daily only
- GE (STRONG_SELL, 9.4 score, 0.39 conf) ‚Üí Might not appear in any tab

**Action:** Open http://127.0.0.1:5000/heatmap and verify categorization matches expectations

---

### 12. Monitor First Full Automated Cycle üëÄ
**Timeline:** Tonight's midnight run ‚Üí Tomorrow morning review

**What to Monitor:**
1. Scanner duration (should be ~3 minutes)
2. Fusion coverage (12 symbols ‚Üí hopefully more)
3. Log file cleanliness (no errors)
4. Heat map updates automatically

**Success Criteria:**
- Zero errors in log
- All agents complete successfully
- Heat maps show updated timestamp
- At least 20-30 symbols with fusion data

---

## üìä METRICS TO TRACK

### Performance Benchmarks
- [ ] Scanner execution time: ___ seconds
- [ ] Number of symbols scanned: ___
- [ ] Filter pass rate: ____%
- [ ] Fusion coverage: ___/___
- [ ] Heat map load time: ___ ms

### Data Quality
- [ ] How many STRONG_BUY signals?
- [ ] How many STRONG_SELL signals?
- [ ] Average confidence score: ___
- [ ] Symbols with <2 contributing agents: ___

---

## üéØ GOALS FOR THIS WEEK

### Short Term (1-2 days)
- [x] Scanner automation working ‚úÖ
- [ ] Full agent pipeline running automatically
- [ ] All 105 candidates have fusion data
- [ ] Crypto historical data integration

### Medium Term (3-7 days)
- [ ] Polygon API integrated
- [ ] Scanner performance optimized
- [ ] Tick agent running 24/7
- [ ] Supreme Leader pipeline active

### Long Term (Next Week)
- [ ] Complete agent self-learning loop operational
- [ ] Trade archiving and evaluation working
- [ ] Criteria auditor providing feedback
- [ ] System running fully autonomous

---

## üö® POTENTIAL ISSUES TO WATCH

### 1. Rate Limits ‚ö†Ô∏è
- CoinGecko: 50 calls/minute (free tier)
- Yahoo Finance: Soft limits, may throttle
- Polygon: 5 calls/minute (free tier)

**Solution:** Implement exponential backoff and request caching

### 2. Data Staleness ‚ö†Ô∏è
- Scanner runs at midnight
- Heat maps might be outdated by market close next day
- Consider adding intraday update (e.g., 4pm after market close)

### 3. Log File Growth ‚ö†Ô∏è
- Daily logs accumulating in `C:\StockApp\agents\logs\`
- May need log rotation/cleanup strategy
- Consider: Delete logs older than 30 days

### 4. Disk Space ‚ö†Ô∏è
- Scanner output ~100-500KB per day
- Fusion output ~50-200KB per day
- Archive grows with trades
- Monitor: Should be fine for months

---

## ‚úÖ QUICK WINS (Easy Tasks for Maximum Impact)

1. **Install lxml** (2 minutes) ‚Üí Get full S&P 500 coverage
2. **Add indicators/volume to batch file** (5 minutes) ‚Üí 10x more heat map signals
3. **Hard refresh heat map page** ‚Üí See latest data
4. **Check midnight log tomorrow** ‚Üí Confirm automation works

---

## üìû QUESTIONS TO CONSIDER

1. **Should tick agent run 24/7 or just at night?**
   - 24/7 = Better real-time data, more resource intensive
   - Nightly = Simpler, but loses intraday signals

2. **How many symbols should we target?**
   - Current: 105 candidates
   - Full S&P 500 + Top 100 crypto = 600 symbols
   - More symbols = longer scan time

3. **When should Supreme Leader run?**
   - After every fusion? (multiple times per day)
   - Once daily? (simpler)
   - On-demand only?

4. **Do we need historical backfill?**
   - Run agents on past dates to build historical archive?
   - Or start fresh from today?

---

**Priority Order for Tomorrow:**

1. ‚úÖ Check midnight run logs (5 min)
2. üì¶ Install lxml (2 min)
3. ü§ñ Run full agent pipeline manually (30 min)
4. üîß Add agents to batch file for automation (5 min)
5. üß™ Test with fresh scan to verify 100+ symbols get fusion data (30 min)
6. üìù Update requirements.txt (5 min)

**Total Estimated Time:** ~1.5 hours

**Stretch Goals (if time permits):**
7. üîë Get Polygon API key (15 min)
8. üîß Start crypto historical data integration (2-3 hours)

---

*Last Updated: November 19, 2025 at 10:05 PM*
*Next Review: November 20, 2025 morning*
